

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Basic Program Flow &mdash; Cozmo Build a Plate Game 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Cozmo Build a Plate Game 1.0.0 documentation" href="../index.html"/>
        <link rel="next" title="cozmo_taste_game package" href="../cozmo_taste_game/cozmo_taste_game.html"/>
        <link rel="prev" title="Setup" href="setup.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Cozmo Build a Plate Game
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Basic Program Flow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#image-capture">Image Capture</a></li>
<li class="toctree-l2"><a class="reference internal" href="#game-loop">Game Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="#food-analyzer">Food Analyzer</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cozmo_taste_game/cozmo_taste_game.html">cozmo_taste_game package</a></li>
</ul>
<p class="caption"><span class="caption-text">Diagrams</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="class_diagrams.html">Class Diagrams</a></li>
</ul>
<p class="caption"><span class="caption-text">Image Recognition</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="how_to_train.html">How to Train Cozmo to Recognize a New Food</a></li>
</ul>
<p class="caption"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Cozmo Build a Plate Game</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Basic Program Flow</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/pages/basic_program_flow.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="basic-program-flow">
<h1>Basic Program Flow<a class="headerlink" href="#basic-program-flow" title="Permalink to this headline">¶</a></h1>
<p>The program has 3 parts: image capture, the game loop, and the food analyzer.</p>
<div class="section" id="image-capture">
<h2>Image Capture<a class="headerlink" href="#image-capture" title="Permalink to this headline">¶</a></h2>
<p>When the program first starts, it ties cozmo’s camera event
to the on_new_camera_image() function, which is then called asynchronously by the Cozmo api.
Every time cozmo has a new image in its buffer. The program then saves the image to disk
and stores its location in the global variable ‘photo_location’. Another image will not be taken until the game loop has
consumed the image and sets ‘photo_location’ to None.</p>
</div>
<div class="section" id="game-loop">
<h2>Game Loop<a class="headerlink" href="#game-loop" title="Permalink to this headline">¶</a></h2>
<p>The game loop is very simple. The game loop checks to see if ‘photo_location’ isn’t None. If it is, the program
forwards ‘photo_location’ to the food analyzer, which is where all of the tensorflow image recognition is done.
After the program is done analyzing the photo, it checks to see if a valid food was found. If there is a valid food,
the game performs an action with the food, which in our case is trying to add it to the plate.</p>
</div>
<div class="section" id="food-analyzer">
<h2>Food Analyzer<a class="headerlink" href="#food-analyzer" title="Permalink to this headline">¶</a></h2>
<p>The food analyzer is where all the filtering is done for image recognition. Sometimes when Cozmo see’s an image, there may
be a false positive. This is why inside the food analyzer, when it thinks it sees something, it will keep track of previous
foods and will only say that it has found food when it is fully confident.</p>
<p>One implementation could be to only be confident
when the analyze_photo function has a max confidence above .6 3 times in a row. This is conservative, but it will filter
out any potential false positives.</p>
<p><strong>References</strong></p>
<p><a class="reference internal" href="../cozmo_taste_game/cozmo_taste_game.image_recognition.html#module-cozmo_taste_game.image_recognition.response_analyzer" title="cozmo_taste_game.image_recognition.response_analyzer"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cozmo_taste_game.image_recognition.response_analyzer</span></code></a></p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../cozmo_taste_game/cozmo_taste_game.html" class="btn btn-neutral float-right" title="cozmo_taste_game package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="setup.html" class="btn btn-neutral" title="Setup" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, The Cozmopolitans.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>